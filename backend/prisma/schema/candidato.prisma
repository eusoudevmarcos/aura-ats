model Candidato {
    id       String   @id @default(uuid(7))
    corem    String?
    contatos String[]
    emails   String[]
    links    String[]

    areaCandidato   AreaCandidato
    candidaturaVaga CandidaturaVaga[]
    formacoes       Formacao[]
    anexos          CandidatoAnexo[]

    pessoa   Pessoa @relation(fields: [pessoaId], references: [id])
    pessoaId String @unique

    medico Medico?

    deletedAt DateTime?
}

model Crm {
    id            String   @id @default(uuid(7))
    numero        Int
    ufCrm         String
    dataInscricao DateTime

    medico   Medico? @relation(fields: [medicoId], references: [id], onDelete: Cascade)
    medicoId String?

    @@index([medicoId])
}

model Medico {
    id  String  @id @default(uuid(7))
    crm Crm[] // Sigla do estado na frente

    especialidades EspecialidadeMedico[]

    quadroSocietario      Boolean? // se faz parte de alguma sociedade
    quadroDeObservações String?

    exames                     String?
    especialidadesEnfermidades String?
    porcentagemRepasseMedico   String?
    porcentagemConsultas       String?
    porcentagemExames          String?

    candidato   Candidato? @relation(fields: [candidatoId], references: [id], onDelete: Cascade)
    candidatoId String?    @unique

    @@index([candidatoId])
}

model EspecialidadeMedico {
    id  String @id @default(uuid(7))
    rqe String?

    especialidade   Especialidade @relation(fields: [especialidadeId], references: [id])
    especialidadeId Int

    medico   Medico @relation(fields: [medicoId], references: [id])
    medicoId String

    @@index([especialidadeId])
    @@index([medicoId])
}

model Especialidade {
    id     Int                   @id @default(autoincrement())
    nome   String                @unique
    sigla  String
    medico EspecialidadeMedico[]
}

model Formacao {
    id                   String    @id @default(uuid(7))
    instituicao          String?   @default("A definir")
    curso                String?   @default("A definir")
    dataInicio           DateTime?
    dataFim              DateTime?
    dataInicioResidencia DateTime?
    dataFimResidencia    DateTime?

    candidato   Candidato? @relation(fields: [candidatoId], references: [id])
    candidatoId String?

    @@index([candidatoId])
}

model CandidatoAnexo {
    candidato   Candidato @relation(fields: [candidatoId], references: [id], onDelete: Cascade)
    candidatoId String

    anexo   Anexo  @relation(fields: [anexoId], references: [id])
    anexoId String

    @@id([candidatoId, anexoId])
    @@index([anexoId])
}

// model CandidatoHabilidade {
//   candidatoId     String
//   habilidadeId    String
//   nivel           String?
//   experienciaAnos Int?
//   candidato       Candidato  @relation(fields: [candidatoId], references: [id])
//   habilidade      Habilidade @relation(fields: [habilidadeId], references: [id])
//
//   @@id([candidatoId, habilidadeId])
// }
